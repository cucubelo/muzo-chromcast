<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Muzo - Chromecast Receiver</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body {
    margin:0; font-family: "Segoe UI", Roboto, sans-serif;
    background: #111827; color: #fff; display:flex; justify-content:center; align-items:center; height:100vh;
  }
  .container {
    text-align:center; max-width:480px; padding:20px; border-radius:16px; background:#1f2937;
  }
  .logo {
    width:80px; margin-bottom:20px;
  }
  .cover {
    width:100%; border-radius:12px; overflow:hidden; margin-bottom:16px;
  }
  .cover img {
    width:100%; object-fit:cover;
  }
  .title { font-size: 24px; font-weight:bold; margin-bottom:6px; }
  .artist { font-size:18px; color:#94a3b8; margin-bottom:16px; }
  .controls button {
    padding:10px 16px; margin:0 6px; border:none; border-radius:12px;
    font-size:16px; cursor:pointer; background:#22c55e; color:#052e12;
  }
</style>
</head>
<body>
<div class="container">
  <img src="muzo-logo.png" alt="Muzo" class="logo">
  <div class="cover" id="coverBox"><img src="" alt="Portada" id="coverImg"></div>
  <div class="title" id="title">Título</div>
  <div class="artist" id="artist">Artista</div>
  <div class="controls">
    <button id="btnPlay">▶ Play</button>
    <button id="btnPause">⏸ Pause</button>
  </div>
</div>

<script src="https://www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
<script>
const context = cast.framework.CastReceiverContext.getInstance();
const player = context.getPlayerManager();

// Configuración de tu app
context.setLoggerLevel(cast.framework.LoggerLevel.DEBUG);
context.start();

player.addEventListener(cast.framework.events.EventType.MEDIA_STATUS, (e) => {
    const media = player.getMediaInformation();
    if (!media) return;
    const titleEl = document.getElementById("title");
    const artistEl = document.getElementById("artist");
    const coverEl = document.getElementById("coverImg");

    titleEl.textContent = media.metadata ? media.metadata.title || "Título" : "Título";
    artistEl.textContent = media.metadata ? media.metadata.artist || "Artista" : "Artista";
    coverEl.src = media.metadata && media.metadata.images && media.metadata.images[0] ? media.metadata.images[0].url : "";
});

// Botones de control local
document.getElementById("btnPlay").addEventListener("click", () => player.play());
document.getElementById("btnPause").addEventListener("click", () => player.pause());
</script>
</body>
</html>
